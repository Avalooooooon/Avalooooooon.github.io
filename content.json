{"meta":{"title":"一之碎片","subtitle":"「宠辱不惊 相由心生」","description":"前端 杂谈","author":"一之碎片","url":"https://avalooooooon.github.io","root":"/"},"pages":[],"posts":[{"title":"建站记录","slug":"建站记录","date":"2021-12-19T06:53:04.000Z","updated":"2021-12-19T07:07:29.231Z","comments":true,"path":"2021/12/19/建站记录/","link":"","permalink":"https://avalooooooon.github.io/2021/12/19/%E5%BB%BA%E7%AB%99%E8%AE%B0%E5%BD%95/","excerpt":"","text":"Part1 环境搭建安装nodejs12node -v npm -v #查看版本 安装git1git --version #查看版本 创建博客文件夹并安装hexo12npm install -g hexo-clihexo -v 可能出现的问题运行npm install -g hexo-cli时，可能提示没有权限。这里强烈建议不要用sudo方式强行获得权限。解决方法：第一步，赋予目录权限；第二步，安装hexo: 12sudo chown -R `whoami` /usr/local/lib/node_modules #这里不用改路径npm install hexo-cli -g 至此安装部分已经结束。下面对hexo进行初始化，给自己准备存放hexo主要内容的文件夹取一个名字（比如myblog），运行下列命令： 123hexo init myblogcd myblognpm install 可以看到，myblog目录下出现了：–node_modules: 依赖包–public：存放生成的页面–scaffolds：生成文章的一些模板–source：用来存放你的文章–themes：主题–_config.yml：博客的配置文件 运行下列命令打开hexo的服务，在浏览器输入localhost:4000就可以看到生成的博客了： 12hexo ghexo server 创建Github库并绑定SSH首先在自己的github下new一个和自己注册github时的用户名xxx同名的仓库，后面加.github.io。也就是新仓库的名字叫xxx.github.io。接下来生成SSH。依次运行下列命令： 12345git config --global user.name &quot;yourname&quot; #github用户名git config --global user.email &quot;youremail&quot; #github绑定的邮箱git config user.namegit config user.email #检查一下输对没有ssh-keygen -t rsa -C &quot;youremail&quot; #创建SSH，一路回车 找到～/.ssh文件夹。（显示隐藏文件夹，同时按下三个组合键：Shift + Command + . ）在自己GitHub的setting中找到SSH keys，点击New SSH key。将id_rsa.pub里面的信息全部复制进去并保存。查看是否成功： 1ssh -T git@github.com 将hexo托管到个人Github先安装deploy-git ，也就是部署的命令，这样才能用命令部署到GitHub: 1npm install hexo-deployer-git --save 在myblog文件夹下打开站点配置文件*_config.yml*，翻到最后，修改为 1234deploy: type: git repo: git@github.com:xxx/xxx.github.io.git branch: master 准备就绪后, 123hexo clean #清除了之前生成的东西，也可以不加。hexo g #生成静态文章，hexo generate的缩写hexo d #部署文章，hexo deploy的缩写,,可与hexo g合并为 hexo d -g 过一会儿就可以在http://xxx.github.io 这个网站看到博客了。 写文章使用指令新建一篇文章： 1hexo new [layout] &lt;title&gt; 写完后，运行下列代码以部署更新。 123hexo cleanhexo ghexo d #可与hexo g合并为 hexo d -g 关于[layout]Hexo 有三种默认布局：post、page 和 draft，它们分别对应不同的路径。自己自定义的其他布局和 post 相同，都将储存到 source/_posts 文件夹。可以通过 publish 命令将草稿移动到 source/_posts 文件夹： 1hexo publish [layout] &lt;title&gt; 草稿默认是不会显示在页面中的，可在执行时加上 –draft 参数，或是把 render_drafts 参数设为 true来预览草稿。也可以编辑现有的layout，比如post的layout默认是hexo\\scaffolds\\post.md比如想添加categories（文章分类目录），以免每次手工输入，只需要修改这个文件添加一行，如下： 1234title: &#123; &#123; title &#125; &#125; #文章页面上的显示名称，可以任意修改，不会出现在URL中date: &#123; &#123; date &#125; &#125; #文章生成时间，一般不改，当然也可以任意修改categories: #文章分类目录，可以为空tags: #文章标签，可空，多标签请用格式[tag1,tag2,tag3]， 请注意，大括号与大括号之间多加了个空格，否则会被转义，不能正常显示。 注意，所有文件：后面都必须有个空格，不然会报错。 写作时可能用到的插件1.插入图片 12cd blog/myblog # 进入本地博客文件夹npm install https://github.com/CodeFalling/hexo-asset-image --save 接下来打开hexo的配置文件_config.yml，找到 post_asset_folder，把这个选项从false改成true。最后打开/node_modules/hexo-asset-image/index.js，将内容更换为下面的代码（参考了这篇博客)。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&#x27;use strict&#x27;;var cheerio = require(&#x27;cheerio&#x27;);// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-stringfunction getPosition(str, m, i) &#123; return str.split(m, i).join(m).length;&#125;var version = String(hexo.version).split(&#x27;.&#x27;);hexo.extend.filter.register(&#x27;after_post_render&#x27;, function(data)&#123; var config = hexo.config; if(config.post_asset_folder)&#123; var link = data.permalink; if(version.length &gt; 0 &amp;&amp; Number(version[0]) == 3) var beginPos = getPosition(link, &#x27;/&#x27;, 1) + 1; else var beginPos = getPosition(link, &#x27;/&#x27;, 3) + 1; // In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;. var endPos = link.lastIndexOf(&#x27;/&#x27;) + 1; link = link.substring(beginPos, endPos); var toprocess = [&#x27;excerpt&#x27;, &#x27;more&#x27;, &#x27;content&#x27;]; for(var i = 0; i &lt; toprocess.length; i++)&#123; var key = toprocess[i]; var $ = cheerio.load(data[key], &#123; ignoreWhitespace: false, xmlMode: false, lowerCaseTags: false, decodeEntities: false &#125;); $(&#x27;img&#x27;).each(function()&#123; if ($(this).attr(&#x27;src&#x27;))&#123; // For windows style path, we replace &#x27;\\&#x27; to &#x27;/&#x27;. var src = $(this).attr(&#x27;src&#x27;).replace(&#x27;\\\\&#x27;, &#x27;/&#x27;); if(!/http[s]*.*|\\/\\/.*/.test(src) &amp;&amp; !/^\\s*\\//.test(src)) &#123; // For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed. // In addition, to support multi-level local directory. var linkArray = link.split(&#x27;/&#x27;).filter(function(elem)&#123; return elem != &#x27;&#x27;; &#125;); var srcArray = src.split(&#x27;/&#x27;).filter(function(elem)&#123; return elem != &#x27;&#x27; &amp;&amp; elem != &#x27;.&#x27;; &#125;); if(srcArray.length &gt; 1) srcArray.shift(); src = srcArray.join(&#x27;/&#x27;); $(this).attr(&#x27;src&#x27;, config.root + link + src); console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src); &#125; &#125;else&#123; console.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;); console.info&amp;&amp;console.info($(this)); &#125; &#125;); data[key] = $.html(); &#125; &#125;&#125;); 现在就可以插入图片了，比如hexo new post photo之后就在source/_posts生成photo.md文件和photo文件夹，我们把要插入的图片复制到photo文件夹内，在photo.md文件里面按markdown的标准写,（我的文件名是head.jpeg）比如 Part2 基本配置hexo基本配置——_config.yml在文件根目录下的_config.yml，就是整个hexo框架的配置文件了。可以在里面修改大部分的配置。详细可参考官方的配置描述。 网站参数 描述title 网站标题subtitle 网站副标题description 主要用于SEO，告诉搜索引擎一个关于您站点的简单描述，通常建议在其中包含您网站的关键词。author 用于主题显示文章的作者language 网站使用的语言timezone 网站时区。Hexo 默认使用您电脑的时区。时区列表。比如说：America/New_York, Japan, 和 UTC 。 网址参数 描述url 你的网站域名root 网站根目录permalink 文章的永久链接格式permalink_defaults 用于主题显示文章的作者 permalink，也就是你生成某个文章时的那个链接格式。比如我新建一个文章叫temp.md，那么这个时候他自动生成的地址就是http://yoursite.com/2018/09/05/temp。以下是官方给出的示例，关于链接的变量还有很多，需要的可以去官网上查找永久链接 。 参数 描述:year/:month/:day/:title/ 2013/07/14/hello-world:year-:month-:day-:title.html :year-:month-:day-:title.html:category/:title foo/bar/hello-world 再往下翻，中间这些都默认就好了。 12345678theme: landscape # Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repo: &lt;repository url&gt; branch: [branch] theme：主题名deploy：网站部署。repo就是仓库(Repository)的简写。branch选择仓库的哪个分支。这个在之前进行github page部署的时候已经修改过了，不再赘述。而这个在后面进行双平台部署的时候会再次用到。 Front-matterFront-matter 是文件最上方以 — 分隔的区域，用于指定个别文件的变量，举例来说： 123title: Hello Worlddate: 2013/7/13 20:46:25--- 下面是预先定义的参数，在模板中使用这些参数值并加以利用。参数 描述layout 布局title 标题date 建立日期updated 更新日期comments 开启文章的评论功能tags 标签（不适用于分页）。标签没有顺序和层次。categories 分类（不适用于分页）。具有顺序性和层次性，也就是说 Foo, Bar不等于 Bar, Foo。permalink 覆盖文章网址 Layout使用命令 1hexo new [layout] &lt;title&gt; 它默认使用的是post这个布局，也就是在source文件夹下的_post里面。Hexo 有三种默认布局：post、page 和 draft，它们分别对应不同的路径。自定义的其他布局和 post 相同，都将储存到 source/_posts 文件夹。 page如果想另起一页，那么可以使用 1hexo new page board draft如果想写文章，又不希望被看到，那么可以 1hexo new draft newpage 这样会在source/_draft中新建一个newpage.md文件。如果你的草稿文件写的过程中想要预览一下，那么可以使用 1hexo server --draft 在本地端口中开启服务预览。 如果你的草稿文件写完了，想要发表到post中， 1hexo publish draft newpage 就会自动把newpage.md发送到post中。 Part3 个性化官网上的主题们我用的是Volantis。在github下载并放到theme文件夹下，然后根目录下的_config.yml中把theme换成那个主题文件夹的名字，它就会自动在theme文件夹中搜索你配置的主题。volantis官方文档-主题配置进入volantis这个文件夹，可以看到里面也有一个配置文件_config.xml，这个配置文件是修改整个主题的配置文件。主题目录下的 _config.yml 文件通常负责主题相关配置，我们强烈建议您使用代替的主题配置文件以防止自己的配置丢失。如何操作呢–参见volantis官方文档-代替主题配置文件 。（以后补： default info cdn） menu其中，“关于”是找不到网页的，因为文章中没有about这个东西。如果想要的话，可以执行命令 1hexo new page about 它就会在根目录下source文件夹中新建一个about文件夹，以及index.md，在index.md中写上你想要写的东西，就可以在网站上展示出来了。如果你想要自己再自定义一个菜单栏的选项，那么就 1hexo new page yourdiy 然后在主题配置文件的menu菜单栏里按照其他菜单项的格式添加一个，注意把url改了且格式保持整齐（比如有时候直接回车会出错，要删掉多余的空间然后按空格键调整格式）。然后在languages文件夹中，找到zh-CN.yml，在index中添加yourdiy: ‘中文意思’就可以显示中文了。启用搜索功能用到的插件在主题的config.yml文件中，搜索search关键字，可以看到 12# To use hexo search, you need to install the following plugins:# npm i hexo-generator-json-content Part4 hexo附加功能评论系统在主题的config.yml文件中，搜索comment关键字，可以看到一些相关内容。 Part5 git分支进行多终端工作场景：现在在自己的笔记本上写的博客，部署在了网站上。那么在家里或者实验室的台式机，发现电脑里面没有博客的文件，或者要换电脑了，最后不知道怎么移动文件，怎么办？在这里我们就可以利用git的分支系统进行多终端工作了，这样每次打开不一样的电脑，只需要进行简单的配置和在github上把文件同步下来，就可以无缝操作了。 参考链接原文链接：https://blog.csdn.net/sinat_37781304/article/details/82729029","categories":[],"tags":[{"name":"hexo macOS Volantis","slug":"hexo-macOS-Volantis","permalink":"https://avalooooooon.github.io/tags/hexo-macOS-Volantis/"}]},{"title":"Hello World","slug":"hello-world","date":"2021-12-19T06:06:04.768Z","updated":"2021-12-19T06:06:04.768Z","comments":true,"path":"2021/12/19/hello-world/","link":"","permalink":"https://avalooooooon.github.io/2021/12/19/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}],"categories":[],"tags":[{"name":"hexo macOS Volantis","slug":"hexo-macOS-Volantis","permalink":"https://avalooooooon.github.io/tags/hexo-macOS-Volantis/"}]}